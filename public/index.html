<!DOCTYPE html>
<html dir="rtl" lang="ar">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ø£Ø¯Ø§Ø© Ø§Ù„ÙƒØªØ§Ø¨Ø© Ø§Ù„Ø°ÙƒÙŠØ© - AI Writer</title>
    <link href="https://fonts.googleapis.com/css2?family=Tajawal:wght@400;600;700&display=swap" rel="stylesheet">
    <link rel="icon" href="favicon.ico" type="image/x-icon">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jszip/3.10.1/jszip.min.js"></script>
    <meta name="description" content="Ø£Ø¯Ø§Ø© ÙƒØªØ§Ø¨Ø© Ø§Ù„Ù…Ù‚Ø§Ù„Ø§Øª Ø§Ù„Ø°ÙƒÙŠØ© ØªØ³Ø§Ø¹Ø¯Ùƒ Ø¹Ù„Ù‰ Ø¥Ù†Ø´Ø§Ø¡ Ù…Ù‚Ø§Ù„Ø§Øª Ø¹Ø±Ø¨ÙŠØ© Ø§Ø­ØªØ±Ø§ÙÙŠØ© Ø¨Ø³Ù‡ÙˆÙ„Ø© Ø¨Ø§Ø³ØªØ®Ø¯Ø§Ù… ØªÙ‚Ù†ÙŠØ§Øª Ø§Ù„Ø°ÙƒØ§Ø¡ Ø§Ù„Ø§ØµØ·Ù†Ø§Ø¹ÙŠ Ù…Ù† Ù…Ø¯Ø±Ø³Ø© Ø§Ù„Ø°ÙƒØ§Ø¡ Ø§Ù„Ø§ØµØ·Ù†Ø§Ø¹ÙŠ.">
    <meta name="robots" content="index, follow">
<meta property="og:title" content="Ø£Ø¯Ø§Ø© ÙƒØªØ§Ø¨Ø© Ø§Ù„Ù…Ù‚Ø§Ù„Ø§Øª Ø§Ù„Ø°ÙƒÙŠØ© - AI Writer">
<meta property="og:description" content="Ø£Ù†Ø´Ø¦ Ù…Ù‚Ø§Ù„Ø§Øª Ø¹Ø±Ø¨ÙŠØ© Ø§Ø­ØªØ±Ø§ÙÙŠØ© Ø¨Ø§Ø³ØªØ®Ø¯Ø§Ù… Ø§Ù„Ø°ÙƒØ§Ø¡ Ø§Ù„Ø§ØµØ·Ù†Ø§Ø¹ÙŠ.">
<meta property="og:image" content="Ø±Ø§Ø¨Ø· ØµÙˆØ±Ø© Ø§Ù„Ø£Ø¯Ø§Ø©">
<meta property="og:url" content="Ø±Ø§Ø¨Ø· Ù…ÙˆÙ‚Ø¹Ùƒ">
<meta name="twitter:card" content="summary_large_image">


 <link rel="stylesheet" href="style.css">


</head>

<body>

 <div class="g_id_signin" data-type="standard"></div>

    <div class="container">
  <header class="header">
  <div class="logo-container">
    <a href="https://ribhonline31.blogspot.com" class="logo-link" target="_blank" rel="noopener noreferrer">
      <img src="https://blogger.googleusercontent.com/img/a/AVvXsEgbcrY_UmYFuOqq4ZcaVj0Y1LRoLqdpJ3L847s_utvBOcHXiGmc6Pjn7tpbAZI-vwz7eUxrCLs-MadSR2rzdl_9eo0F45eoJbl6EB0ux6oZQNHFuE1l58y2R522jPMbHI9UZWtj8TdPfDLos3v3zHrhb4Swr4EYYL5ThfPCmjsZ26jJuJrlIJJvoiXida4=s250" alt="Ø´Ø¹Ø§Ø± Ø£Ø¯Ø§Ø© ÙƒØªØ§Ø¨Ø© Ø§Ù„Ù…Ù‚Ø§Ù„Ø§Øª Ø§Ù„Ø°ÙƒÙŠØ© Ù…Ù† Ù…Ø¯Ø±Ø³Ø© Ø§Ù„Ø°ÙƒØ§Ø¡ Ø§Ù„Ø§ØµØ·Ù†Ø§Ø¹ÙŠ" class="logo">
    </a>
  </div>
<h1>Ø£Ù†Ø´Ø¦ Ù…Ù‚Ø§Ù„Ø§Øª Ø§Ø­ØªØ±Ø§ÙÙŠØ© Ø¨Ø§Ø³ØªØ®Ø¯Ø§Ù… Ø£Ø¯Ø§Ø© Ø§Ù„ÙƒØªØ§Ø¨Ø© Ø§Ù„Ø°ÙƒÙŠØ© - AI Writer</h1>
</header>

       <div id="apiSection">
  <form onsubmit="return false;" class="input-group">
    <label>Ù…ÙØªØ§Ø­ API Ø§Ù„Ø®Ø§Øµ Ø¨Ùƒ</label>
    <input type="password" id="apiKey" placeholder="Ø£Ø¯Ø®Ù„ Ù…ÙØªØ§Ø­ Gemini API">
    <button class="generate-btn mt-2" onclick="saveAPIKey()">Ø­ÙØ¸ Ø§Ù„Ù…ÙØªØ§Ø­</button>
  </form>
</div>


<body>

   

        <div id="mainUI" class="hidden">
            <div class="category-grid">
                <div class="category-card" data-category="1">
                    <i class="fas fa-futbol fa-2x"></i>
                    <h3>Ù…Ù‚Ø§Ù„Ø§Øª Ø±ÙŠØ§Ø¶ÙŠØ©</h3>
                </div>
                <div class="category-card" data-category="2">
                    <i class="fas fa-utensils fa-2x"></i>
                    <h3>ÙˆØµÙØ§Øª Ø·Ø¹Ø§Ù…</h3>
                </div>
                <div class="category-card" data-category="3">
                    <i class="fas fa-plane fa-2x"></i>
                    <h3>Ø£Ù…Ø§ÙƒÙ† Ø³ÙŠØ§Ø­ÙŠØ©</h3>
                </div>
                <div class="category-card" data-category="4">
                    <i class="fas fa-edit fa-2x"></i>
                    <h3>Ù…ÙˆØ¶ÙˆØ¹ Ù…Ø®ØµØµ</h3>
                </div>
            </div>

            <div class="input-group">
                <div id="customTopic" class="hidden">
                    <label>Ø¹Ù†ÙˆØ§Ù† Ø§Ù„Ù…Ù‚Ø§Ù„ Ø§Ù„Ù…Ø®ØµØµ</label>
                    <textarea id="customTopicInput" rows="2" placeholder="Ø£Ø¯Ø®Ù„ Ø¹Ù†ÙˆØ§Ù† Ø§Ù„Ù…Ù‚Ø§Ù„ Ø§Ù„Ù…Ø·Ù„ÙˆØ¨..."></textarea>
                </div>
                
                <!-- Ù†Ø§ÙØ°Ø© Ø§Ø®ØªÙŠØ§Ø± Ø§Ù„Ù…Ø¯ÙˆÙ†Ø© -->
<div id="blogModal" style="display:none; position:fixed; top:0; left:0; width:100%; height:100%; background:#000000aa; z-index:9999; justify-content:center; align-items:center;">
  <div style="background:#fff; padding:20px; border-radius:10px; width:300px; max-height:400px; overflow-y:auto;">
    <h3 style="margin-bottom: 10px;">ğŸ“ Ø§Ø®ØªØ± Ù…Ø¯ÙˆÙ†Ø© Ù„Ù„Ù†Ø´Ø±</h3>
    <ul id="blogList" style="list-style:none; padding:0;"></ul>
    <button onclick="closeBlogModal()" style="margin-top:10px;">âŒ Ø¥Ù„ØºØ§Ø¡</button>
  </div>
</div>

                <label>Ø¹Ø¯Ø¯ Ø§Ù„Ù…Ù‚Ø§Ù„Ø§Øª</label>
                <input type="number" id="articleCount" value="1" min="1" max="50">
            </div>

            <div class="progress-container">
                <div class="progress-bar" id="progressBar"></div>
            </div>

            <label for="language">Ø§Ø®ØªØ± Ø§Ù„Ù„ØºØ©:</label>
<select id="language">
  <option value="ar" selected>Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©</option>
  <option value="en">English</option>
</select>

            <div id="statusBar" class="alert"></div>

            <button class="generate-btn" onclick="generateArticles()">
                <i class="fas fa-rocket"></i>
                Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„Ù…Ù‚Ø§Ù„Ø§Øª Ø§Ù„Ø¢Ù†
            </button>
        </div>
    </div>



    <div id="wordpressLoginModal" class="modal hidden">
  <div class="modal-content">
    <h3>ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ Ø¥Ù„Ù‰ WordPress</h3>
    <input type="text" id="wpUrl" placeholder="Ø±Ø§Ø¨Ø· Ø§Ù„Ù…ÙˆÙ‚Ø¹ (Ù…Ø«Ø§Ù„: https://example.com)">
    <input type="text" id="wpUsername" placeholder="Ø§Ø³Ù… Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…">
    <input type="password" id="wpPassword" placeholder="ÙƒÙ„Ù…Ø© Ù…Ø±ÙˆØ± Ø§Ù„ØªØ·Ø¨ÙŠÙ‚">
    <button id="confirmWpLogin">Ù…ØªØ§Ø¨Ø¹Ø©</button>
    <button onclick="closeWpModal()">Ø¥Ù„ØºØ§Ø¡</button>
  </div>
</div>

    
    <script>

        let currentCategory = '1';
        let apiKey = localStorage.getItem('gemini_api_key') || '';

        document.addEventListener('DOMContentLoaded', () => {
            document.querySelectorAll('.category-card').forEach(card => {
                card.addEventListener('click', () => {
                    document.querySelectorAll('.category-card').forEach(c => c.classList.remove('active'));
                    card.classList.add('active');
                    currentCategory = card.dataset.category;
                    document.getElementById('customTopic').classList.toggle('hidden', currentCategory !== '4');
                });
            });
            
            if(apiKey) toggleMainUI();
        });

        function saveAPIKey() {
            apiKey = document.getElementById('apiKey').value.trim();
            if(!apiKey) return showError('Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø¥Ø¯Ø®Ø§Ù„ Ù…ÙØªØ§Ø­ API ØµØ­ÙŠØ­');
            localStorage.setItem('gemini_api_key', apiKey);
            toggleMainUI();
            showSuccess('ØªÙ… Ø­ÙØ¸ Ø§Ù„Ù…ÙØªØ§Ø­ Ø¨Ù†Ø¬Ø§Ø­!');
        }

        function toggleMainUI() {
            document.getElementById('apiSection').classList.add('hidden');
            document.getElementById('mainUI').classList.remove('hidden');
        }
          function validateInputs(topic, count) {
            if(!apiKey) {
                showError('Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø¥Ø¯Ø®Ø§Ù„ Ù…ÙØªØ§Ø­ API Ø£ÙˆÙ„Ø§Ù‹');
                return false;
            }
            if(count < 1 || count > 50) {
                showError('Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø¥Ø¯Ø®Ø§Ù„ Ø¹Ø¯Ø¯ Ø¨ÙŠÙ† 1 Ùˆ 50');
                return false;
            }
            if(currentCategory === '4' && !topic) {
                showError('Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø¥Ø¯Ø®Ø§Ù„ Ø¹Ù†ÙˆØ§Ù† Ø§Ù„Ù…Ù‚Ø§Ù„ Ø§Ù„Ù…Ø®ØµØµ');
                return false;
            }
            return true;
        }

// âœ… Ø¯Ø§Ù„Ø© ØªØ­Ø³ÙŠÙ† Ø¹Ù†ÙˆØ§Ù† Ø§Ù„Ù…Ù‚Ø§Ù„ ØªÙ„Ù‚Ø§Ø¦ÙŠÙ‹Ø§
function makeSEOFriendlyTitle(title) {
  return title
    .replace(/[^a-zA-Z0-9Ø€-Û¿\s]/g, '') // Ø¥Ø²Ø§Ù„Ø© Ø§Ù„Ø±Ù…ÙˆØ²
    .replace(/\s+/g, ' ') // ØªÙˆØ­ÙŠØ¯ Ø§Ù„ÙØ±Ø§ØºØ§Øª
    .replace(/\b(Ù…Ù‚Ø§Ù„|Ø­ÙˆÙ„|Ø¹Ù†|ÙƒÙ„ Ø´ÙŠØ¡|Ù…Ù‚Ø¯Ù…Ø©)\b/gi, '') // Ø­Ø°Ù ÙƒÙ„Ù…Ø§Øª Ø¹Ø§Ù…Ø©
    .trim()
    .slice(0, 60);
}
function stripHTML(html) {
  const div = document.createElement('div');
  div.innerHTML = html;
  return div.textContent || div.innerText || '';
}

// âœ… Ø¯Ø§Ù„Ø© Ø§Ù„Ù†Ø´Ø± Ø¥Ù„Ù‰ Ø¨Ù„ÙˆØ¬Ø± Ù…Ø¹ ØªÙ…Ø±ÙŠØ± Ø§Ù„Ø¹Ù†ÙˆØ§Ù† Ø§Ù„Ù…ÙØ­Ø³Ù†
async function handleBloggerPublishing(title, content, topic, language = 'ar') {
  try {
    const res = await fetch(`${BASE_URL}/auth/status`, {
      credentials: 'include'
    });
    const status = await res.json();

    if (!status.loggedIn) {
      localStorage.setItem('pendingPost', JSON.stringify({ title, content, topic, language }));
      window.location.href = `${BASE_URL}/auth`;
      return null;
    }

    const permalink = '';
    const metaTags = generateMetaTags(content, topic, title, permalink, language);
    const cleanedContent = metaTags + cleanHTMLContent(content, language);
    const fullTitle = title;

    const response = await fetch(`${BASE_URL}/publish`, {
      method: 'POST',
      credentials: 'include',
      headers: { 'Content-Type': 'application/json' },
      body: JSON.stringify({ title: fullTitle, content: cleanedContent })
    });

    if (!response.ok) {
      const errData = await response.json().catch(() => ({}));
      console.error('Ø®Ø·Ø£ ÙÙŠ Ø§Ù„Ù†Ø´Ø±:', errData.error || response.statusText);
      return null;
    }

    const data = await response.json();
    return data.url;

  } catch (error) {
    console.error('Ø®Ø·Ø£ ÙÙŠ Ø§Ù„Ø§ØªØµØ§Ù„ Ø¨Ø§Ù„Ø®Ø§Ø¯Ù…:', error);
    return null;
  }
}


 async function publishToWordPress(index) {
  const article = articles[index]; // ØªØ£ÙƒØ¯ Ø£Ù† `articles` ØªØ­ØªÙˆÙŠ Ø¹Ù„Ù‰ Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ù…Ù‚Ø§Ù„Ø§Øª
  try {
    const res = await fetch('https://ai-writer-sgka.onrender.com/publish-wordpress', {
      method: 'POST',
      headers: { 'Content-Type': 'application/json' },
      body: JSON.stringify({
        title: article.title,
        content: article.content,
        ...wpCredentials
      }),
    });

    const data = await res.json();
    if (res.ok) {
      alert('âœ… ØªÙ… Ù†Ø´Ø± Ø§Ù„Ù…Ù‚Ø§Ù„ ÙÙŠ WordPress: ' + data.url);
    } else {
      alert('âŒ ÙØ´Ù„ ÙÙŠ Ø§Ù„Ù†Ø´Ø±: ' + data.error);
    }
  } catch (err) {
    console.error('Ø®Ø·Ø£ ÙÙŠ Ø§Ù„Ø§ØªØµØ§Ù„ Ø¨Ù€ WordPress:', err);
    alert('âŒ Ø®Ø·Ø£ ÙÙŠ Ø§Ù„Ø§ØªØµØ§Ù„ Ø¨Ø§Ù„Ø®Ø§Ø¯Ù…');
  }
}

function generateMetaTags(content, topic) {
  const description = content.replace(/<[^>]+>/g, '').trim().slice(0, 150) + '...';
const keywords = extractKeywords(topic, currentCategory, language);
  return `
<meta name="description" content="${description}">
<meta name="keywords" content="${keywords}">
`;
}

async function generateArticles() {
  const articlesContainer = document.getElementById('articlesOutput');

  try {
    const res = await fetch(`${BASE_URL}/auth/status`, { credentials: 'include' });
    const contentType = res.headers.get('content-type') || '';
    if (!res.ok || !contentType.includes('application/json')) {
      throw new Error('âŒ Ù„Ù… ÙŠØªÙ… ØªÙ„Ù‚ÙŠ Ø§Ø³ØªØ¬Ø§Ø¨Ø© JSON Ù…Ù† Ø§Ù„Ø®Ø§Ø¯Ù…');
    }

    const data = await res.json();
    const isLoggedIn = data.loggedIn;

    const count = parseInt(document.getElementById('articleCount').value) || 1;
    const language = document.getElementById('language').value;

    const topic = currentCategory === '4'
      ? document.getElementById('customTopicInput').value.trim()
      : getDefaultTopic(language);

    if (!validateInputs(topic, count)) return;

    showLoading();
    resetProgress();
    articlesContainer.style.display = 'none';
    articlesContainer.innerHTML = '';

    const zip = new JSZip();

    for (let i = 0; i < count; i++) {
      const stepWeight = 100 / count;
       updateProgress(i * stepWeight + 5);

      try {
        const content = await fetchArticle(topic, currentCategory, language);
        updateProgress(i * stepWeight + 20);
       const articleBodyContent = content;
       const title = articleBodyContent.split('\n')[0].replace(/^#+/, '').trim(); // ØªÙˆÙ„ÙŠØ¯ Ø§Ù„Ø¹Ù†ÙˆØ§Ù† Ù…Ù† Ø£ÙˆÙ„ Ø³Ø·Ø±
const metaTags = generateMetaTags(articleBodyContent, topic, title, '', language);
const htmlContent = metaTags + cleanHTMLContent(articleBodyContent, language);


         const safeFileName = sanitizeFileName(`Ù…Ù‚Ø§Ù„_${i + 1}_${topic}`);
        zip.file(`${safeFileName}.txt`, htmlContent);

        const articleBlob = new Blob([htmlContent], { type: 'text/html' });
        const articleUrl = URL.createObjectURL(articleBlob);

        updateProgress(i * stepWeight + 90);
       displayArticleInPage(
  articlesContainer,
  i,
  title,
  htmlContent,
  articleUrl,
  safeFileName,
  isLoggedIn,
  topic,
  language
);


      } catch (articleError) {
        console.warn(`âŒ ÙØ´Ù„ Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„Ù…Ù‚Ø§Ù„ Ø±Ù‚Ù… ${i + 1}:`, articleError.message);
        showError(`âš ï¸ Ù„Ù… ÙŠØªÙ… ØªÙˆÙ„ÙŠØ¯ Ø§Ù„Ù…Ù‚Ø§Ù„ Ø±Ù‚Ù… ${i + 1} Ø¨Ø³Ø¨Ø¨ Ø®Ø·Ø£ ÙÙŠ Ø§Ù„Ø§ØªØµØ§Ù„ Ø£Ùˆ Ø§Ù„ØªÙˆÙ„ÙŠØ¯.`);
        continue;
      }

      await sleep(500);
    }

    updateProgress(100);
    showSuccess(`âœ… ØªÙ… Ø¥Ù†Ø´Ø§Ø¡ ${count} Ù…Ù‚Ø§Ù„${count > 1 ? 'Ø§Øª' : ''} Ø¨Ù†Ø¬Ø§Ø­!`);

    const zipBlob = await zip.generateAsync({ type: 'blob' });
    const zipUrl = URL.createObjectURL(zipBlob);
    const zipLink = document.createElement('a');
    zipLink.href = zipUrl;
    zipLink.download = `Ù…Ù‚Ø§Ù„Ø§Øª_${sanitizeFileName(topic)}.zip`;
    zipLink.click();

    articlesContainer.style.display = 'flex';

  } catch (error) {
    showError(error.message || 'Ø­Ø¯Ø« Ø®Ø·Ø£ Ø£Ø«Ù†Ø§Ø¡ Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„Ù…Ù‚Ø§Ù„Ø§Øª');
    articlesContainer.style.display = 'none';
  } finally {
    setTimeout(resetProgress, 1500);
  }
}


async function fetchArticle(topic, currentCategory, language = 'ar') {
  let article = '';
  let lastText = '';
  let wordCount = 0;
  const targetWords = 1500;
  const maxTries = 5;
  let tries = 0;

  function stripHTML(html) {
    const tmp = document.createElement("DIV");
    tmp.innerHTML = html;
    return tmp.textContent || tmp.innerText || "";
  }

  while (wordCount < targetWords && tries < maxTries) {
    tries++;

    const isLastTry = tries === maxTries || wordCount > targetWords * 0.85;

   const promptText = lastText && !article.includes('<h2>Ø§Ù„Ù…ØµØ§Ø¯Ø±</h2>')
  ? `Ø§Ø³ØªÙ…Ø± ÙÙŠ ÙƒØªØ§Ø¨Ø© Ø§Ù„Ù…Ù‚Ø§Ù„ Ø§Ù„ØªØ§Ù„ÙŠ Ø­ÙˆÙ„ "${topic}" Ø¨Ø¯Ø¡Ù‹Ø§ Ù…Ù†: "${lastText.slice(-500)}"` + // Ø²ÙˆØ¯Ù†Ø§ Ø§Ù„Ù‚Ø·Ø¹Ø© Ù‡Ù†Ø§
    (isLastTry ? "\n\nÙŠØ±Ø¬Ù‰ Ø¥Ù†Ù‡Ø§Ø¡ Ø§Ù„Ù…Ù‚Ø§Ù„ Ø¨Ø¥Ø¶Ø§ÙØ© Ù‚Ø³Ù… <h2>Ø§Ù„Ù…ØµØ§Ø¯Ø±</h2> ÙŠØ­ØªÙˆÙŠ Ø¹Ù„Ù‰ Ø±ÙˆØ§Ø¨Ø· Ù…ÙˆØ«ÙˆÙ‚Ø© Ø¨ØµÙŠØºØ© HTML." : "")
: generatePrompt(topic, currentCategory, language);


    const response = await fetch(
      'https://generativelanguage.googleapis.com/v1beta/models/gemini-2.0-flash:generateContent?key=' + apiKey,
      {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify({
          contents: [{
            role: "user",
            parts: [{ text: promptText }]
          }],
          generationConfig: {
            temperature: 0.7,
            maxOutputTokens: 4000 // Ø²ÙŠØ§Ø¯Ø© Ø¹Ø¯Ø¯ Ø§Ù„ØªÙˆÙƒÙ†Ø²
          }
        })
      }
    );

    if (!response.ok) {
      const errorData = await response.json().catch(() => ({}));
      throw new Error(errorData.error?.message || 'ÙØ´Ù„ Ø§Ù„Ø§ØªØµØ§Ù„ Ø¨Ø§Ù„Ø®Ø§Ø¯Ù…');
    }

    const data = await response.json();

    if (!data.candidates || !data.candidates[0]?.content?.parts?.[0]?.text) {
      throw new Error('âŒ Ø§Ø³ØªØ¬Ø§Ø¨Ø© ØºÙŠØ± ØµØ§Ù„Ø­Ø© Ù…Ù† API');
    }

    const newPart = data.candidates[0].content.parts[0].text;

    article += newPart + "\n";
    
    // ØªØ­Ø¯ÙŠØ« Ø¹Ø¯ Ø§Ù„ÙƒÙ„Ù…Ø§Øª Ø¨Ø¹Ø¯ ØªÙ†Ù‚ÙŠØ© Ø§Ù„Ù†Øµ Ù…Ù† Ø§Ù„ÙˆØ³ÙˆÙ…
    wordCount = stripHTML(article).trim().split(/\s+/).length;
    
    lastText = newPart;

    // ØªØ­Ù‚Ù‚ Ù…Ù…Ø§ Ø¥Ø°Ø§ ØªÙ…Øª Ø¥Ø¶Ø§ÙØ© Ù‚Ø³Ù… "Ø§Ù„Ù…ØµØ§Ø¯Ø±"
    if (
      (article.includes('<h2>Ø§Ù„Ù…ØµØ§Ø¯Ø±</h2>') && article.includes('<ul>') && article.includes('<li>')) ||
      newPart.trim().endsWith('</html>') ||
      (isLastTry && newPart.trim().endsWith('.'))
    ) {
      break;
    }
  }

  if (wordCount < targetWords) {
    console.warn(`âš ï¸ Ø§Ù„Ù…Ù‚Ø§Ù„ ÙŠØ­ØªÙˆÙŠ ÙÙ‚Ø· Ø¹Ù„Ù‰ ${wordCount} ÙƒÙ„Ù…Ø© Ø¨Ø¹Ø¯ ${maxTries} Ù…Ø­Ø§ÙˆÙ„Ø§Øª.`);
  }

  // ØªÙ†Ø¸ÙŠÙ Ø§Ù„Ù…Ù‚Ø§Ù„ Ø¨Ø¹Ø¯ Ù‚Ø³Ù… Ø§Ù„Ù…ØµØ§Ø¯Ø± (Ù…Ø¹ Ø§Ù„Ø¥Ø¨Ù‚Ø§Ø¡ Ø¹Ù„Ù‰ Ø§Ù„Ù‚Ø³Ù… ÙƒØ§Ù…Ù„Ø§Ù‹)
  const sourcesIndex = article.indexOf('<h2>Ø§Ù„Ù…ØµØ§Ø¯Ø±</h2>');
  if (sourcesIndex !== -1) {
    const endOfSources = article.indexOf('</ul>', sourcesIndex);
    if (endOfSources !== -1) {
      article = article.slice(0, endOfSources + 5); // Ø§Ø­ØªØ³Ø§Ø¨ Ø·ÙˆÙ„ </ul>
    }
  }

  // ØªÙ†Ø¸ÙŠÙ ØªÙ†Ø³ÙŠÙ‚Ø§Øª Markdown ÙÙŠ Ø¨Ø¯Ø§ÙŠØ© Ø§Ù„Ù†Øµ (Ù…Ø«Ù„ ```html Ø£Ùˆ <html> Ø£Ùˆ html ÙÙ‚Ø·)
  article = article.replace(/^(```html|html|<html>)\s*/i, '').trim();
  article = article.replace(/```/g, '').trim();

  return article;
}


// --- Ø¯ÙˆØ§Ù„ Ù…Ø³Ø§Ø¹Ø¯Ø© Ù„ÙˆØ§Ø¬Ù‡Ø© Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… ---

function updateProgress(percentage) {
  const progressBar = document.getElementById('progressBar');
  if (progressBar) {
    progressBar.style.width = `${Math.floor(percentage)}%`;
  }
}

function resetProgress() {
  setTimeout(() => {
    const progressBar = document.getElementById('progressBar');
    if (progressBar) {
      progressBar.style.width = '0%';
    }
  }, 1000); // ØªØ£Ø®ÙŠØ± Ø²Ù…Ù†ÙŠ Ø¨Ø¹Ø¯ Ø¹Ø±Ø¶ Ø§Ù„Ù†ØªÙŠØ¬Ø©
}

function showLoading() {
  const statusBar = document.getElementById('statusBar');
  if (statusBar) {
    statusBar.className = 'alert';
    statusBar.textContent = 'Ø¬Ø§Ø±ÙŠ Ø§Ù„Ù…Ø¹Ø§Ù„Ø¬Ø©... â³';
  }
}

function showSuccess(message) {
  const statusBar = document.getElementById('statusBar');
  if (statusBar) {
    statusBar.className = 'alert alert-success';
    statusBar.textContent = message;
  }
}

function showError(message) {
  const statusBar = document.getElementById('statusBar');
  if (statusBar) {
    statusBar.className = 'alert alert-error';
    statusBar.textContent = message;
  }
}

function downloadZip(content) {
  const url = URL.createObjectURL(content);
  const a = document.createElement('a');
  a.href = url;
  a.download = `Ø§Ù„Ù…Ù‚Ø§Ù„Ø§Øª_${new Date().toISOString()}.zip`;
  document.body.appendChild(a);
  a.click();
  document.body.removeChild(a);
  URL.revokeObjectURL(url);
}

function getDefaultTopic(language = 'ar') {
  const topics = {
    ar: {
      '1': [
        'Ø£ÙØ¶Ù„ Ø§Ù„Ø£Ù†Ø¯ÙŠØ© Ø§Ù„Ø±ÙŠØ§Ø¶ÙŠØ© Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©',
         'Ø£ÙØ¶Ù„ Ù„Ø§Ø¹Ø¨ÙŠ ÙƒØ±Ø© Ø§Ù„Ù‚Ø¯Ù… ÙÙŠ Ø§Ù„Ø¹Ø§Ù„Ù… Ø§Ù„Ø¹Ø±Ø¨ÙŠ',
      'Ø£Ø´Ù‡Ø± Ù…Ø¨Ø§Ø±ÙŠØ§Øª Ø§Ù„ÙƒÙ„Ø§Ø³ÙŠÙƒÙˆ ÙÙŠ Ø§Ù„ØªØ§Ø±ÙŠØ®',
      'Ù†ØµØ§Ø¦Ø­ Ù„Ù„ÙŠØ§Ù‚Ø© Ø§Ù„Ø¨Ø¯Ù†ÙŠØ© Ù„Ù„Ù…Ø¨ØªØ¯Ø¦ÙŠÙ†',
        'ØªØ§Ø±ÙŠØ® Ø§Ù„Ø¯ÙˆØ±ÙŠ Ø§Ù„Ø³Ø¹ÙˆØ¯ÙŠ ÙˆØ£Ø´Ù‡Ø± Ø£Ù†Ø¯ÙŠØªÙ‡',
        'ØªØ­Ù„ÙŠÙ„ Ù„Ø£Ø¯Ø§Ø¡ Ø§Ù„ÙØ±Ù‚ ÙÙŠ Ø§Ù„Ø¯ÙˆØ±ÙŠ Ø§Ù„Ù…ØµØ±ÙŠ Ø§Ù„Ù…Ù…ØªØ§Ø²'
      
      ],
      '2': [
        'ÙˆØµÙØ© ÙƒØ¹Ùƒ Ø§Ù„Ø¹ÙŠØ¯ Ø§Ù„ØªÙ‚Ù„ÙŠØ¯ÙŠ',
        'Ø·Ø±ÙŠÙ‚Ø© ØªØ­Ø¶ÙŠØ± Ø§Ù„ÙƒØ¨Ø³Ø© Ø§Ù„Ø³Ø¹ÙˆØ¯ÙŠØ©',
         'Ø·Ø±ÙŠÙ‚Ø© Ø¹Ù…Ù„ Ø§Ù„Ù…Ø³Ø®Ù† Ø§Ù„ÙÙ„Ø³Ø·ÙŠÙ†ÙŠ',
      'ÙˆØµÙØ© Ø§Ù„ÙƒØ¨Ø³Ø© Ø§Ù„Ø³Ø¹ÙˆØ¯ÙŠØ© Ø§Ù„ØªÙ‚Ù„ÙŠØ¯ÙŠØ©',
      'Ø£ÙØ¶Ù„ Ø·Ø±Ù‚ ØªØ­Ø¶ÙŠØ± Ø§Ù„Ù…Ø¹Ø¬Ù†Ø§Øª',
        'Ø£Ø´Ù‡Ù‰ Ø§Ù„Ø£Ø·Ø¨Ø§Ù‚ Ø§Ù„Ø±Ù…Ø¶Ø§Ù†ÙŠØ©'
      ],
      '3': [
        'Ø£Ø¬Ù…Ù„ Ø§Ù„Ù…Ø¯Ù† Ø§Ù„Ø³ÙŠØ§Ø­ÙŠØ© ÙÙŠ Ø§Ù„Ø®Ù„ÙŠØ¬',
        'Ø¯Ù„ÙŠÙ„Ùƒ Ù„Ø²ÙŠØ§Ø±Ø© Ø¯Ø¨ÙŠ ÙÙŠ 5 Ø£ÙŠØ§Ù…',
              'Ø£Ø¬Ù…Ù„ Ø§Ù„Ø´ÙˆØ§Ø·Ø¦ ÙÙŠ Ø§Ù„Ø®Ù„ÙŠØ¬ Ø§Ù„Ø¹Ø±Ø¨ÙŠ',
      'Ø£ÙØ¶Ù„ ÙÙ†Ø§Ø¯Ù‚ Ø¯Ø¨ÙŠ Ù„Ù„Ø¹Ø§Ø¦Ù„Ø§Øª',
      'Ù†ØµØ§Ø¦Ø­ Ø§Ù„Ø³ÙØ± Ø¥Ù„Ù‰ Ø³Ù„Ø·Ù†Ø© Ø¹Ù…Ø§Ù†',
        'Ø£Ù…Ø§ÙƒÙ† Ø³ÙŠØ§Ø­ÙŠØ© Ù…Ø®ÙÙŠØ© ÙÙŠ Ø³Ù„Ø·Ù†Ø© Ø¹Ù…Ø§Ù†'
      ]
    },
    en: {
      '1': [
        'Top Arab Sports Clubs',
        'History of the Saudi Football League',
        'Performance Analysis of Egyptian League Teams'
      ],
      '2': [
        'Traditional Eid Cookie Recipe',
        'How to Make Saudi Kabsa',
        'Most Delicious Ramadan Dishes'
      ],
      '3': [
        'Top Tourist Cities in the Gulf',
        '5-Day Dubai Travel Guide',
        'Hidden Travel Gems in Oman'
      ]
    }
  };

  const currentTopics = topics[language]?.[currentCategory];
  
  if (!currentTopics || currentTopics.length === 0) {
    console.warn(`âš ï¸ Ù„Ø§ ØªÙˆØ¬Ø¯ Ù…ÙˆØ§Ø¶ÙŠØ¹ Ù„Ù„ØªØµÙ†ÙŠÙ ${currentCategory} Ø£Ùˆ Ø§Ù„Ù„ØºØ© ${language}`);
    return language === 'en' ? 'General article in English' : 'Ù…Ù‚Ø§Ù„ Ø¹Ø§Ù… Ø¨Ø§Ù„Ù„ØºØ© Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©';
  }

  // Ø§Ø®ØªÙŠØ§Ø± Ù…ÙˆØ¶ÙˆØ¹ Ø¹Ø´ÙˆØ§Ø¦ÙŠ Ù…Ù† Ø§Ù„Ù‚Ø§Ø¦Ù…Ø©
  const randomIndex = Math.floor(Math.random() * currentTopics.length);
  return currentTopics[randomIndex];
}


function extractKeywords(topic, currentCategory = '4', language = 'ar') {
  const arabicStopWords = ['Ù‡Ø°Ù‡', 'Ø§Ù„Ø°ÙŠ', 'Ø§Ù„ØªÙŠ', 'Ù…Ù†', 'Ø¹Ù†', 'Ø¹Ù„Ù‰', 'ÙÙŠ', 'Ùˆ', 'Ø£Ù†', 'Ø¥Ù„Ù‰', 'Ù…Ø¹', 'Ø¨Ù‡Ø§', 'Ù„Ù‡', 'ÙƒÙ…Ø§'];
  const englishStopWords = ['this', 'that', 'from', 'with', 'about', 'into', 'and', 'the', 'for', 'are', 'was'];

  const stopWords = language === 'en' ? englishStopWords : arabicStopWords;

  // ØªØ®ØµÙŠØµ ÙƒÙ„Ù…Ø§Øª Ù…ÙØªØ§Ø­ÙŠØ© Ù…Ù‚ØªØ±Ø­Ø© Ù„ÙƒÙ„ ØªØµÙ†ÙŠÙ
  const customKeywords = {
    '1': ['Ø±ÙŠØ§Ø¶Ø©', 'ÙƒØ±Ø© Ø§Ù„Ù‚Ø¯Ù…', 'Ø§Ù„Ø¯ÙˆØ±ÙŠ', 'Ø£Ù‡Ø¯Ø§Ù', 'ØªØ­Ù„ÙŠÙ„'], // Ø±ÙŠØ§Ø¶Ø©
    '2': ['Ø·Ø¨Ø®', 'ÙˆØµÙØ©', 'Ù…Ù‚Ø§Ø¯ÙŠØ±', 'Ø·Ø±ÙŠÙ‚Ø©', 'Ù…ÙƒÙˆÙ†Ø§Øª'],        // ÙˆØµÙØ§Øª
    '3': ['Ø³ÙŠØ§Ø­Ø©', 'Ø§Ù„Ø³ÙØ±', 'Ø¯Ù„ÙŠÙ„', 'ÙˆØ¬Ù‡Ø©', 'ÙÙ†Ø§Ø¯Ù‚'],         // Ø£Ù…Ø§ÙƒÙ† Ø³ÙŠØ§Ø­ÙŠØ©
    '4': [] // Ù…ÙˆØ¶ÙˆØ¹ Ù…Ø®ØµØµ
  };

  const words = topic.toLowerCase().split(/\s+/);
  const baseKeywords = words.filter(word => word.length > 3 && !stopWords.includes(word));

  const combinedKeywords = [...new Set([
    ...customKeywords[currentCategory],
    ...baseKeywords
  ])];

  return combinedKeywords.slice(0, 7).join(', ');
}


function generatePrompt(topic, currentCategory, language = 'ar') {
  if (language === 'en') {
  return `Write a detailed, SEO-optimized blog post of at least 2000 words about "${topic}".
Include HTML formatting with <h2>, <p>, <ul>, and <li> as needed. Add a conclusion and a sources section in <h2>Sources</h2> with links inside <ul><li><a href='...'>Source</a></li></ul>.`;
}
const keywords = extractKeywords(topic, currentCategory, language);

  const baseSourcesNote = `- ÙˆÙÙŠ Ù†Ù‡Ø§ÙŠØ© Ø§Ù„Ù…Ù‚Ø§Ù„ØŒ Ø£Ø¶Ù Ù‚Ø³Ù…Ù‹Ø§ Ø¨Ø¹Ù†ÙˆØ§Ù† <h2>Ø§Ù„Ù…ØµØ§Ø¯Ø±</h2> ÙŠØ­ØªÙˆÙŠ Ø¹Ù„Ù‰ Ù‚Ø§Ø¦Ù…Ø© <ul> Ø¨Ù‡Ø§ Ø±ÙˆØ§Ø¨Ø· Ù…ÙˆØ«ÙˆÙ‚Ø© Ø°Ø§Øª ØµÙ„Ø© Ø¨Ø§Ù„Ù…ÙˆØ¶ÙˆØ¹ Ù…Ø«Ù„ ÙˆÙŠÙƒÙŠØ¨ÙŠØ¯ÙŠØ§ Ø£Ùˆ BBC Ø£Ùˆ Aljazeera Ø¨ØµÙŠØºØ©: <li><a href="https://example.com">Ø§Ø³Ù… Ø§Ù„Ù…ØµØ¯Ø±</a></li>`;

  const prompts = {
    '1': `Ø§ÙƒØªØ¨ Ù…Ù‚Ø§Ù„Ù‹Ø§ Ø±ÙŠØ§Ø¶ÙŠÙ‹Ø§ Ø§Ø­ØªØ±Ø§ÙÙŠÙ‹Ø§ Ù„Ø§ ÙŠÙ‚Ù„ Ø¹Ù† 2000 ÙƒÙ„Ù…Ø© Ø­ÙˆÙ„ "${topic}"  Ù…Ù†Ø¸Ù…Ø© ÙˆÙ…ØªÙˆØ§ÙÙ‚Ø© Ù…Ø¹ Ù…Ø¹Ø§ÙŠÙŠØ± Ø§Ù„Ø³ÙŠÙˆ (SEO)ØŒ ÙŠØªØ¶Ù…Ù†:
- Ù„Ø§ ØªÙƒØªØ¨ Ø£ÙŠ ÙÙ‚Ø±Ø© Ø®Ø§Ø±Ø¬ Ø¹Ù†Ø§ØµØ± HTML
- Ù…Ù‚Ø¯Ù…Ø© ØªØ¹Ø±ÙŠÙÙŠØ© Ø¨Ø§Ù„ÙÙƒØ±Ø©
- Ø¹Ù†Ø§ÙˆÙŠÙ† Ø±Ø¦ÙŠØ³ÙŠØ© ÙˆÙØ±Ø¹ÙŠØ© (h2/h3)
- ÙƒÙ„Ù…Ø§Øª Ù…ÙØªØ§Ø­ÙŠØ©: ${keywords}
- ÙÙ‚Ø±Ø§Øª Ù…Ù†Ø¸Ù…Ø© Ø¯Ø§Ø®Ù„ <p>
- Ø®Ø§ØªÙ…Ø© ÙˆØ§Ø¶Ø­Ø© Ùˆ ØªØ´Ø¬ÙŠØ¹ Ø§Ù„Ù‚Ø§Ø±Ø¦ Ø¹Ù„Ù‰ Ø§Ù„ØªÙØ§Ø¹Ù„
- ÙŠØ¬Ø¨ Ø£Ù† Ù„Ø§ ØªÙ‚Ù„ Ø§Ù„Ù…Ù‚Ø§Ù„Ø© Ø¹Ù† 2000 ÙƒÙ„Ù…Ø©ØŒ Ù„Ø§ ØªØ®ØªØµØ± ÙˆÙ„Ø§ ØªÙ‚Ù„Ù„ Ø§Ù„Ù…Ø­ØªÙˆÙ‰

${baseSourcesNote}`,

    '2': `Ø§ÙƒØªØ¨ ÙˆØµÙØ© Ù…ÙØµÙ„Ø© Ù„Ø§ ØªÙ‚Ù„ Ø¹Ù† 2000 ÙƒÙ„Ù…Ø© Ø­ÙˆÙ„ "${topic}"  Ù…ØªÙˆØ§ÙÙ‚Ø© Ù…Ø¹ Ø§Ù„Ø³ÙŠÙˆØŒ ØªØ´Ù…Ù„:
- Ù„Ø§ ØªÙƒØªØ¨ Ø£ÙŠ ÙÙ‚Ø±Ø© Ø®Ø§Ø±Ø¬ Ø¹Ù†Ø§ØµØ± HTML
- Ù…Ù‚Ø¯Ù…Ø© ØªØ¹Ø±ÙŠÙÙŠØ© Ø¨Ø§Ù„ÙÙƒØ±Ø©
- Ø¹Ù†Ø§ÙˆÙŠÙ† Ø±Ø¦ÙŠØ³ÙŠØ© ÙˆÙØ±Ø¹ÙŠØ© (h2/h3)
- ÙƒÙ„Ù…Ø§Øª Ù…ÙØªØ§Ø­ÙŠØ©: ${keywords}
- Ø®Ø·ÙˆØ§Øª ØªØ­Ø¶ÙŠØ± Ù…Ø±Ù‚Ù…Ø© Ø¯Ø§Ø®Ù„ <ol><li>
- Ù…Ø¹Ù„ÙˆÙ…Ø§Øª ØºØ°Ø§Ø¦ÙŠØ© Ùˆ ØªØ´Ø¬ÙŠØ¹ Ø§Ù„Ù‚Ø§Ø±Ø¦ Ø¹Ù„Ù‰ Ø§Ù„ØªÙØ§Ø¹Ù„
- ÙŠØ¬Ø¨ Ø£Ù† Ù„Ø§ ØªÙ‚Ù„ Ø§Ù„Ù…Ù‚Ø§Ù„Ø© Ø¹Ù† 2000 ÙƒÙ„Ù…Ø©ØŒ Ù„Ø§ ØªØ®ØªØµØ± ÙˆÙ„Ø§ ØªÙ‚Ù„Ù„ Ø§Ù„Ù…Ø­ØªÙˆÙ‰

${baseSourcesNote}`,

    '3': `Ø£Ù†Ø´Ø¦ Ø¯Ù„ÙŠÙ„ Ø³ÙŠØ§Ø­ÙŠ Ù…ÙØµÙ„ Ù„Ø§ ÙŠÙ‚Ù„ Ø¹Ù† 2000 ÙƒÙ„Ù…Ø© Ø­ÙˆÙ„ "${topic}"  Ù…Ù†Ø¸Ù…Ø©ØŒ ÙŠØ­ØªÙˆÙŠ Ø¹Ù„Ù‰:
- Ù„Ø§ ØªÙƒØªØ¨ Ø£ÙŠ ÙÙ‚Ø±Ø© Ø®Ø§Ø±Ø¬ Ø¹Ù†Ø§ØµØ± HTML
- Ù…Ù‚Ø¯Ù…Ø© ØªØ¹Ø±ÙŠÙÙŠØ© Ø¨Ø§Ù„ÙÙƒØ±Ø©
- - Ø¹Ù†Ø§ÙˆÙŠÙ† Ø±Ø¦ÙŠØ³ÙŠØ© ÙˆÙØ±Ø¹ÙŠØ© (h2/h3) Ù„Ù„Ù…Ø¯Ù† ÙˆØ§Ù„Ø£Ù†Ø´Ø·Ø©
- ÙƒÙ„Ù…Ø§Øª Ù…ÙØªØ§Ø­ÙŠØ©: ${keywords}
- ÙÙ‚Ø±Ø§Øª Ø¯Ø§Ø®Ù„ <p> Ù‚Ø§Ø¨Ù„Ø© Ù„Ù„Ø¹Ø±Ø¶ ÙÙŠ Blogger
- Ø®Ø§ØªÙ…Ø© Ù‚ÙˆÙŠØ© ÙˆØªØ´Ø¬ÙŠØ¹ Ø§Ù„Ù‚Ø§Ø±Ø¦ Ø¹Ù„Ù‰ Ø§Ù„ØªÙØ§Ø¹Ù„
- ÙŠØ¬Ø¨ Ø£Ù† Ù„Ø§ ØªÙ‚Ù„ Ø§Ù„Ù…Ù‚Ø§Ù„Ø© Ø¹Ù† 2000 ÙƒÙ„Ù…Ø©ØŒ Ù„Ø§ ØªØ®ØªØµØ± ÙˆÙ„Ø§ ØªÙ‚Ù„Ù„ Ø§Ù„Ù…Ø­ØªÙˆÙ‰
${baseSourcesNote}`,

     '4': `Ø§ÙƒØªØ¨ Ù…Ù‚Ø§Ù„Ø© Ø¹Ø§Ù…Ø© Ù…Ù†Ø³Ù‚Ø© Ù„Ø§ ØªÙ‚Ù„ Ø¹Ù† 2000 ÙƒÙ„Ù…Ø© Ø­ÙˆÙ„ "${topic}"ØŒ Ù…Ø¹:
- Ù„Ø§ ØªÙƒØªØ¨ Ø£ÙŠ ÙÙ‚Ø±Ø© Ø®Ø§Ø±Ø¬ Ø¹Ù†Ø§ØµØ± HTML
- Ù…Ù‚Ø¯Ù…Ø© ØªØ¹Ø±ÙŠÙÙŠØ© Ø¨Ø§Ù„ÙÙƒØ±Ø©
- Ø¹Ù†Ø§ÙˆÙŠÙ† Ø±Ø¦ÙŠØ³ÙŠØ© ÙˆÙØ±Ø¹ÙŠØ© (h2/h3)
- ÙƒÙ„Ù…Ø§Øª Ù…ÙØªØ§Ø­ÙŠØ©: ${keywords}
- ÙÙ‚Ø±Ø§Øª ÙˆØ§Ø¶Ø­Ø© Ø¯Ø§Ø®Ù„ <p>
- Ø®Ø§ØªÙ…Ø© Ù‚ÙˆÙŠØ© ØªÙ„Ø®Øµ Ø§Ù„Ø£ÙÙƒØ§Ø± ÙˆØªØ´Ø¬Ø¹ Ø§Ù„Ù‚Ø§Ø±Ø¦ Ø¹Ù„Ù‰ Ø§Ù„ØªÙØ§Ø¹Ù„
- ÙŠØ¬Ø¨ Ø£Ù† Ù„Ø§ ØªÙ‚Ù„ Ø§Ù„Ù…Ù‚Ø§Ù„Ø© Ø¹Ù† 2000 ÙƒÙ„Ù…Ø©ØŒ Ù„Ø§ ØªØ®ØªØµØ± ÙˆÙ„Ø§ ØªÙ‚Ù„Ù„ Ø§Ù„Ù…Ø­ØªÙˆÙ‰
${baseSourcesNote}`
  // Ù†ÙØ³ Ø§Ù„Ø´ÙŠØ¡ Ù„Ø¨Ù‚ÙŠØ© Ø§Ù„ÙØ¦Ø§Øª...
};

  if (!currentCategory || !prompts[currentCategory]) {
    return `Ø§ÙƒØªØ¨ Ù…Ù‚Ø§Ù„Ø©  Ù…Ù†Ø¸Ù…Ø© Ù„Ø§ ØªÙ‚Ù„ Ø¹Ù† 2000 ÙƒÙ„Ù…Ø© Ø¹Ù† "${topic}"ØŒ Ù…ØªÙˆØ§ÙÙ‚Ø© Ù…Ø¹ Ø§Ù„Ø³ÙŠÙˆØŒ ØªØªØ¶Ù…Ù† Ø¹Ù†Ø§ÙˆÙŠÙ† ÙˆÙÙ‚Ø±Ø§Øª ÙˆØµÙˆØ± Ø¨ØµÙŠØºØ© webp.
${baseSourcesNote}`;
  }

  return prompts[currentCategory];
}


    </script>
 <div id="articlesOutput" style="display: flex; flex-direction: column;"></div>
<script src="script.js" defer></script>

</body>
</html>