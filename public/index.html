<!DOCTYPE html>
<html dir="rtl" lang="ar">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ุฃุฏุงุฉ ุงููุชุงุจุฉ ุงูุฐููุฉ - AI Writer</title>
    <link href="https://fonts.googleapis.com/css2?family=Tajawal:wght@400;600;700&display=swap" rel="stylesheet">
    <link rel="icon" href="favicon.ico" type="image/x-icon">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jszip/3.10.1/jszip.min.js"></script>
    <meta name="description" content="ุฃุฏุงุฉ ูุชุงุจุฉ ุงูููุงูุงุช ุงูุฐููุฉ ุชุณุงุนุฏู ุนูู ุฅูุดุงุก ููุงูุงุช ุนุฑุจูุฉ ุงุญุชุฑุงููุฉ ุจุณูููุฉ ุจุงุณุชุฎุฏุงู ุชูููุงุช ุงูุฐูุงุก ุงูุงุตุทูุงุนู ูู ูุฏุฑุณุฉ ุงูุฐูุงุก ุงูุงุตุทูุงุนู.">
    <meta name="robots" content="index, follow">
<meta property="og:title" content="ุฃุฏุงุฉ ูุชุงุจุฉ ุงูููุงูุงุช ุงูุฐููุฉ - AI Writer">
<meta property="og:description" content="ุฃูุดุฆ ููุงูุงุช ุนุฑุจูุฉ ุงุญุชุฑุงููุฉ ุจุงุณุชุฎุฏุงู ุงูุฐูุงุก ุงูุงุตุทูุงุนู.">
<meta property="og:image" content="ุฑุงุจุท ุตูุฑุฉ ุงูุฃุฏุงุฉ">
<meta property="og:url" content="ุฑุงุจุท ูููุนู">
<meta name="twitter:card" content="summary_large_image">


 <link rel="stylesheet" href="style.css">


</head>

<body>

 <div class="g_id_signin" data-type="standard"></div>

    <div class="container">
  <header class="header">
  <div class="logo-container">
    <a href="https://ribhonline31.blogspot.com" class="logo-link" target="_blank" rel="noopener noreferrer">
      <img src="https://blogger.googleusercontent.com/img/a/AVvXsEgbcrY_UmYFuOqq4ZcaVj0Y1LRoLqdpJ3L847s_utvBOcHXiGmc6Pjn7tpbAZI-vwz7eUxrCLs-MadSR2rzdl_9eo0F45eoJbl6EB0ux6oZQNHFuE1l58y2R522jPMbHI9UZWtj8TdPfDLos3v3zHrhb4Swr4EYYL5ThfPCmjsZ26jJuJrlIJJvoiXida4=s250" alt="ุดุนุงุฑ ุฃุฏุงุฉ ูุชุงุจุฉ ุงูููุงูุงุช ุงูุฐููุฉ ูู ูุฏุฑุณุฉ ุงูุฐูุงุก ุงูุงุตุทูุงุนู" class="logo">
    </a>
  </div>
<h1>ุฃูุดุฆ ููุงูุงุช ุงุญุชุฑุงููุฉ ุจุงุณุชุฎุฏุงู ุฃุฏุงุฉ ุงููุชุงุจุฉ ุงูุฐููุฉ - AI Writer</h1>
</header>

       <div id="apiSection">
  <form onsubmit="return false;" class="input-group">
    <label>ููุชุงุญ API ุงูุฎุงุต ุจู</label>
    <input type="password" id="apiKey" placeholder="ุฃุฏุฎู ููุชุงุญ Gemini API">
    <button class="generate-btn mt-2" onclick="saveAPIKey()">ุญูุธ ุงูููุชุงุญ</button>
  </form>
</div>


<body>

   

        <div id="mainUI" class="hidden">
            <div class="category-grid">
                <div class="category-card" data-category="1">
                    <i class="fas fa-futbol fa-2x"></i>
                    <h3>ููุงูุงุช ุฑูุงุถูุฉ</h3>
                </div>
                <div class="category-card" data-category="2">
                    <i class="fas fa-utensils fa-2x"></i>
                    <h3>ูุตูุงุช ุทุนุงู</h3>
                </div>
                <div class="category-card" data-category="3">
                    <i class="fas fa-plane fa-2x"></i>
                    <h3>ุฃูุงูู ุณูุงุญูุฉ</h3>
                </div>
                <div class="category-card" data-category="4">
                    <i class="fas fa-edit fa-2x"></i>
                    <h3>ููุถูุน ูุฎุตุต</h3>
                </div>
            </div>

            <div class="input-group">
                <div id="customTopic" class="hidden">
<label>ุนูุงููู ุงูููุงูุงุช (ูุงุญุฏ ูู ูู ุณุทุฑ)</label>
<textarea id="customTopicInput" rows="5" placeholder="ุฃุฏุฎู ูู ุนููุงู ููุงู ูู ุณุทุฑ ูููุตู..."></textarea>
                </div>
                
                <!-- ูุงูุฐุฉ ุงุฎุชูุงุฑ ุงููุฏููุฉ -->
<div id="blogModal" style="display:none; position:fixed; top:0; left:0; width:100%; height:100%; background:#000000aa; z-index:9999; justify-content:center; align-items:center;">
  <div style="background:#fff; padding:20px; border-radius:10px; width:300px; max-height:400px; overflow-y:auto;">
    <h3 style="margin-bottom: 10px;">๐ ุงุฎุชุฑ ูุฏููุฉ ูููุดุฑ</h3>
    <ul id="blogList" style="list-style:none; padding:0;"></ul>
    <button onclick="closeBlogModal()" style="margin-top:10px;">โ ุฅูุบุงุก</button>
  </div>
</div>

                <label>ุนุฏุฏ ุงูููุงูุงุช ูุตูุญุฉ ูุง ุชุถุน ุงูุซุฑ ูู 5:</label>
                <input type="number" id="articleCount" value="1" min="1" max="50">
            </div>
 
            <label for="language">ุงุฎุชุฑ ุงููุบุฉ:</label>
<select id="language">
  <option value="ar" selected>ุงูุนุฑุจูุฉ</option>
  <option value="en">English</option>
</select>

            <div id="statusBar" class="alert"></div>

            <button class="generate-btn" onclick="generateArticles()">
                <i class="fas fa-rocket"></i>
                ุฅูุดุงุก ุงูููุงูุงุช ุงูุขู
            </button>
        </div>
    </div>
<div class="progress-container">
  <div class="progress-bar" id="progressBar">
    <span id="progressText" style="color: white; padding-left: 5px; font-weight: bold;"></span>
  </div>
</div>


    <div id="wordpressLoginModal" class="modal hidden">
  <div class="modal-content">
    <h3>ุชุณุฌูู ุงูุฏุฎูู ุฅูู WordPress</h3>
    <input type="text" id="wpUrl" placeholder="ุฑุงุจุท ุงููููุน (ูุซุงู: https://example.com)">
    <input type="text" id="wpUsername" placeholder="ุงุณู ุงููุณุชุฎุฏู">
    <input type="password" id="wpPassword" placeholder="ูููุฉ ูุฑูุฑ ุงูุชุทุจูู">
    <button id="confirmWpLogin">ูุชุงุจุนุฉ</button>
    <button onclick="closeWpModal()">ุฅูุบุงุก</button>
  </div>
</div>

    
    <script>

        let currentCategory = '1';
        let apiKey = localStorage.getItem('gemini_api_key') || '';

        document.addEventListener('DOMContentLoaded', () => {
            document.querySelectorAll('.category-card').forEach(card => {
                card.addEventListener('click', () => {
                    document.querySelectorAll('.category-card').forEach(c => c.classList.remove('active'));
                    card.classList.add('active');
                    currentCategory = card.dataset.category;
                    document.getElementById('customTopic').classList.toggle('hidden', currentCategory !== '4');
                });
            });
            
            if(apiKey) toggleMainUI();
        });

        function saveAPIKey() {
            apiKey = document.getElementById('apiKey').value.trim();
            if(!apiKey) return showError('ุงูุฑุฌุงุก ุฅุฏุฎุงู ููุชุงุญ API ุตุญูุญ');
            localStorage.setItem('gemini_api_key', apiKey);
            toggleMainUI();
            showSuccess('ุชู ุญูุธ ุงูููุชุงุญ ุจูุฌุงุญ!');
        }

        function toggleMainUI() {
            document.getElementById('apiSection').classList.add('hidden');
            document.getElementById('mainUI').classList.remove('hidden');
        }
       function validateInputs(topics, count) {
  if (!apiKey) {
    showError('ุงูุฑุฌุงุก ุฅุฏุฎุงู ููุชุงุญ API ุฃููุงู');
    return false;
  }
  if (count < 1 || count > 50) {
    showError('ุงูุฑุฌุงุก ุฅุฏุฎุงู ุนุฏุฏ ุจูู 1 ู 50');
    return false;
  }
  if (currentCategory === '4' && topics.length !== count) {
    showError(`ุนุฏุฏ ุงูุนูุงููู (${topics.length}) ูุฌุจ ุฃู ูุณุงูู ุนุฏุฏ ุงูููุงูุงุช (${count})`);
    return false;
  }
  return true;
}


// โ ุฏุงูุฉ ุชุญุณูู ุนููุงู ุงูููุงู ุชููุงุฆููุง
function makeSEOFriendlyTitle(title) {
  return title
    .replace(/[^a-zA-Z0-9ุ-ฟ\s]/g, '') // ุฅุฒุงูุฉ ุงูุฑููุฒ
    .replace(/\s+/g, ' ') // ุชูุญูุฏ ุงููุฑุงุบุงุช
    .replace(/\b(ููุงู|ุญูู|ุนู|ูู ุดูุก|ููุฏูุฉ)\b/gi, '') // ุญุฐู ูููุงุช ุนุงูุฉ
    .trim()
    .slice(0, 60);
}
function stripHTML(html) {
  const div = document.createElement('div');
  div.innerHTML = html;
  return div.textContent || div.innerText || '';
}

// โ ุฏุงูุฉ ุงููุดุฑ ุฅูู ุจููุฌุฑ ูุน ุชูุฑูุฑ ุงูุนููุงู ุงูููุญุณู
async function handleBloggerPublishing(title, content, topic, language = 'ar') {
  try {
    const res = await fetch(`${BASE_URL}/auth/status`, {
      credentials: 'include'
    });
    const status = await res.json();

    if (!status.loggedIn) {
      localStorage.setItem('pendingPost', JSON.stringify({ title, content, topic, language }));
      window.location.href = `${BASE_URL}/auth`;
      return null;
    }

    const permalink = '';
    const metaTags = generateMetaTags(content, topic, title, permalink, language);
    const cleanedContent = metaTags + cleanHTMLContent(content, language);
    const fullTitle = title;

    const response = await fetch(`${BASE_URL}/publish`, {
      method: 'POST',
      credentials: 'include',
      headers: { 'Content-Type': 'application/json' },
      body: JSON.stringify({ title: fullTitle, content: cleanedContent })
    });

    if (!response.ok) {
      const errData = await response.json().catch(() => ({}));
      console.error('ุฎุทุฃ ูู ุงููุดุฑ:', errData.error || response.statusText);
      return null;
    }

    const data = await response.json();
    return data.url;

  } catch (error) {
    console.error('ุฎุทุฃ ูู ุงูุงุชุตุงู ุจุงูุฎุงุฏู:', error);
    return null;
  }
}


 async function publishToWordPress(index) {
  const article = articles[index]; // ุชุฃูุฏ ุฃู `articles` ุชุญุชูู ุนูู ูุงุฆูุฉ ุงูููุงูุงุช
  try {
    const res = await fetch('https://ai-writer-sgka.onrender.com/publish-wordpress', {
      method: 'POST',
      headers: { 'Content-Type': 'application/json' },
      body: JSON.stringify({
        title: article.title,
        content: article.content,
        ...wpCredentials
      }),
    });

    const data = await res.json();
    if (res.ok) {
      alert('โ ุชู ูุดุฑ ุงูููุงู ูู WordPress: ' + data.url);
    } else {
      alert('โ ูุดู ูู ุงููุดุฑ: ' + data.error);
    }
  } catch (err) {
    console.error('ุฎุทุฃ ูู ุงูุงุชุตุงู ุจู WordPress:', err);
    alert('โ ุฎุทุฃ ูู ุงูุงุชุตุงู ุจุงูุฎุงุฏู');
  }
}

function generateMetaTags(content, topic) {
  const description = content.replace(/<[^>]+>/g, '').trim().slice(0, 150) + '...';
const keywords = extractKeywords(topic, currentCategory, language);
  return `
<meta name="description" content="${description}">
<meta name="keywords" content="${keywords}">
`;
}

async function generateArticles() {
  const articlesContainer = document.getElementById('articlesOutput');

  try {
    const res = await fetch(`${BASE_URL}/auth/status`, { credentials: 'include' });
    const contentType = res.headers.get('content-type') || '';
    if (!res.ok || !contentType.includes('application/json')) {
      throw new Error('โ ูู ูุชู ุชููู ุงุณุชุฌุงุจุฉ JSON ูู ุงูุฎุงุฏู');
    }

    const data = await res.json();
    const isLoggedIn = data.loggedIn;

    const count = parseInt(document.getElementById('articleCount').value) || 1;
    const language = document.getElementById('language').value;

  const topics = currentCategory === '4'
  ? document.getElementById('customTopicInput').value
      .split('\n')
      .map(t => t.trim())
      .filter(t => t !== '')
  : Array.from({ length: count }, () => getDefaultTopic(language));


if (!validateInputs(topics, count)) return;

    showLoading();
    resetProgress();
    articlesContainer.style.display = 'none';
    articlesContainer.innerHTML = '';

    const zip = new JSZip();

    for (let i = 0; i < count; i++) {
      const stepWeight = 100 / count;
       updateProgress(i * stepWeight + 5);

      try {
const topic = topics[i];
const content = await fetchArticle(topic, currentCategory, language);
        updateProgress(i * stepWeight + 20);
       const articleBodyContent = content;
       const title = articleBodyContent.split('\n')[0].replace(/^#+/, '').trim(); // ุชูููุฏ ุงูุนููุงู ูู ุฃูู ุณุทุฑ
const metaTags = generateMetaTags(articleBodyContent, topic, title, '', language);
const htmlContent = metaTags + cleanHTMLContent(articleBodyContent, language);


const safeFileName = sanitizeFileName(`ููุงู_${i + 1}_${topic.slice(0, 40)}`);
        zip.file(`${safeFileName}.txt`, htmlContent);

        const articleBlob = new Blob([htmlContent], { type: 'text/html' });
        const articleUrl = URL.createObjectURL(articleBlob);

        updateProgress(i * stepWeight + 90);
       displayArticleInPage(
  articlesContainer,
  i,
  title,
  htmlContent,
  articleUrl,
  safeFileName,
  isLoggedIn,
  topic,
  language
);


      } catch (articleError) {
        console.warn(`โ ูุดู ุฅูุดุงุก ุงูููุงู ุฑูู ${i + 1}:`, articleError.message);
        showError(`โ๏ธ ูู ูุชู ุชูููุฏ ุงูููุงู ุฑูู ${i + 1} ุจุณุจุจ ุฎุทุฃ ูู ุงูุงุชุตุงู ุฃู ุงูุชูููุฏ.`);
        continue;
      }

      await sleep(500);
    }

    updateProgress(100);
    showSuccess(`โ ุชู ุฅูุดุงุก ${count} ููุงู${count > 1 ? 'ุงุช' : ''} ุจูุฌุงุญ!`);

    const zipBlob = await zip.generateAsync({ type: 'blob' });
    const zipUrl = URL.createObjectURL(zipBlob);
    const zipLink = document.createElement('a');
    zipLink.href = zipUrl;
zipLink.download = `ููุงูุงุช_ูุฌููุนุฉ_${new Date().toISOString().split('T')[0]}.zip`;
    zipLink.click();

    articlesContainer.style.display = 'flex';

  } catch (error) {
    showError(error.message || 'ุญุฏุซ ุฎุทุฃ ุฃุซูุงุก ุฅูุดุงุก ุงูููุงูุงุช');
    articlesContainer.style.display = 'none';
  } finally {
    setTimeout(resetProgress, 1500);
  }
}


async function fetchArticle(topic, currentCategory, language = 'ar') {
  let article = '';
  let lastText = '';
  let wordCount = 0;
  const targetWords = 1500;
  const maxTries = 5;
  let tries = 0;

  function stripHTML(html) {
    const tmp = document.createElement("DIV");
    tmp.innerHTML = html;
    return tmp.textContent || tmp.innerText || "";
  }

  while (wordCount < targetWords && tries < maxTries) {
    tries++;

    const isLastTry = tries === maxTries || wordCount > targetWords * 0.85;

   const promptText = lastText && !article.includes('<h2>ุงููุตุงุฏุฑ</h2>')
  ? `ุงุณุชูุฑ ูู ูุชุงุจุฉ ุงูููุงู ุงูุชุงูู ุญูู "${topic}" ุจุฏุกูุง ูู: "${lastText.slice(-500)}"` + // ุฒูุฏูุง ุงููุทุนุฉ ููุง
    (isLastTry ? "\n\nูุฑุฌู ุฅููุงุก ุงูููุงู ุจุฅุถุงูุฉ ูุณู <h2>ุงููุตุงุฏุฑ</h2> ูุญุชูู ุนูู ุฑูุงุจุท ููุซููุฉ ุจุตูุบุฉ HTML." : "")
: generatePrompt(topic, currentCategory, language);


    const response = await fetch(
      'https://generativelanguage.googleapis.com/v1beta/models/gemini-2.0-flash:generateContent?key=' + apiKey,
      {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify({
          contents: [{
            role: "user",
            parts: [{ text: promptText }]
          }],
          generationConfig: {
            temperature: 0.7,
            maxOutputTokens: 4000 // ุฒูุงุฏุฉ ุนุฏุฏ ุงูุชูููุฒ
          }
        })
      }
    );

    if (!response.ok) {
      const errorData = await response.json().catch(() => ({}));
      throw new Error(errorData.error?.message || 'ูุดู ุงูุงุชุตุงู ุจุงูุฎุงุฏู');
    }

    const data = await response.json();

    if (!data.candidates || !data.candidates[0]?.content?.parts?.[0]?.text) {
      throw new Error('โ ุงุณุชุฌุงุจุฉ ุบูุฑ ุตุงูุญุฉ ูู API');
    }

    const newPart = data.candidates[0].content.parts[0].text;

    article += newPart + "\n";
    
    // ุชุญุฏูุซ ุนุฏ ุงููููุงุช ุจุนุฏ ุชูููุฉ ุงููุต ูู ุงููุณูู
    wordCount = stripHTML(article).trim().split(/\s+/).length;
    
    lastText = newPart;

    // ุชุญูู ููุง ุฅุฐุง ุชูุช ุฅุถุงูุฉ ูุณู "ุงููุตุงุฏุฑ"
    if (
      (article.includes('<h2>ุงููุตุงุฏุฑ</h2>') && article.includes('<ul>') && article.includes('<li>')) ||
      newPart.trim().endsWith('</html>') ||
      (isLastTry && newPart.trim().endsWith('.'))
    ) {
      break;
    }
  }

  if (wordCount < targetWords) {
    console.warn(`โ๏ธ ุงูููุงู ูุญุชูู ููุท ุนูู ${wordCount} ูููุฉ ุจุนุฏ ${maxTries} ูุญุงููุงุช.`);
  }

  // ุชูุธูู ุงูููุงู ุจุนุฏ ูุณู ุงููุตุงุฏุฑ (ูุน ุงูุฅุจูุงุก ุนูู ุงููุณู ูุงููุงู)
  const sourcesIndex = article.indexOf('<h2>ุงููุตุงุฏุฑ</h2>');
  if (sourcesIndex !== -1) {
    const endOfSources = article.indexOf('</ul>', sourcesIndex);
    if (endOfSources !== -1) {
      article = article.slice(0, endOfSources + 5); // ุงุญุชุณุงุจ ุทูู </ul>
    }
  }

  // ุชูุธูู ุชูุณููุงุช Markdown ูู ุจุฏุงูุฉ ุงููุต (ูุซู ```html ุฃู <html> ุฃู html ููุท)
  article = article.replace(/^(```html|html|<html>)\s*/i, '').trim();
  article = article.replace(/```/g, '').trim();
// โ ุฅุถุงูุฉ ุฒุฑ ูููุนู ุฃุณูู ุงูููุงู ุฏุงุฆููุง
 const footerLink = `
<div style="text-align: center; margin-top: 30px;">
  <a href="https://ribhonline31.blogspot.com" target="_blank" rel="noopener noreferrer"
     style="
       display: inline-block;
       background-color: #28a745;
       color: white;
       padding: 10px 20px;
       border-radius: 8px;
       font-weight: bold;
       text-decoration: none;
       box-shadow: 0 2px 6px rgba(0,0,0,0.2);
       transition: background 0.3s ease;
     "
     onmouseover="this.style.backgroundColor='#218838'"
     onmouseout="this.style.backgroundColor='#28a745'">
    ๐ ุฒูุฑูุง ูููุนูุง: ribhonline - ุฃุฏูุงุช ูููุฏุฉ
  </a>
</div>
`;

  article += footerLink;

  return article;
}


// --- ุฏูุงู ูุณุงุนุฏุฉ ููุงุฌูุฉ ุงููุณุชุฎุฏู ---

function updateProgress(percentage) {
  const progressBar = document.getElementById('progressBar');
  const progressText = document.getElementById('progressText');
  if (progressBar) {
    progressBar.style.width = `${Math.floor(percentage)}%`;
  }
  if (progressText) {
    progressText.textContent = `${Math.floor(percentage)}%`;
  }
}


function resetProgress() {
  setTimeout(() => {
    const progressBar = document.getElementById('progressBar');
    if (progressBar) {
      progressBar.style.width = '0%';
    }
  }, 1000); // ุชุฃุฎูุฑ ุฒููู ุจุนุฏ ุนุฑุถ ุงููุชูุฌุฉ
}

function showLoading() {
  const statusBar = document.getElementById('statusBar');
  if (statusBar) {
    statusBar.className = 'alert';
    statusBar.textContent = 'ุฌุงุฑู ุงููุนุงูุฌุฉ... โณ';
  }
}

function showSuccess(message) {
  const statusBar = document.getElementById('statusBar');
  if (statusBar) {
    statusBar.className = 'alert alert-success';
    statusBar.textContent = message;
  }
}

function showError(message) {
  const statusBar = document.getElementById('statusBar');
  if (statusBar) {
    statusBar.className = 'alert alert-error';
    statusBar.textContent = message;
  }
}

function downloadZip(content) {
  const url = URL.createObjectURL(content);
  const a = document.createElement('a');
  a.href = url;
  a.download = `ุงูููุงูุงุช_${new Date().toISOString()}.zip`;
  document.body.appendChild(a);
  a.click();
  document.body.removeChild(a);
  URL.revokeObjectURL(url);
}

function getDefaultTopic(language = 'ar') {
  const topics = {
    ar: {
      '1': [
        'ุฃูุถู ุงูุฃูุฏูุฉ ุงูุฑูุงุถูุฉ ุงูุนุฑุจูุฉ',
         'ุฃูุถู ูุงุนุจู ูุฑุฉ ุงููุฏู ูู ุงูุนุงูู ุงูุนุฑุจู',
      'ุฃุดูุฑ ูุจุงุฑูุงุช ุงูููุงุณููู ูู ุงูุชุงุฑูุฎ',
      'ูุตุงุฆุญ ูููุงูุฉ ุงูุจุฏููุฉ ูููุจุชุฏุฆูู',
        'ุชุงุฑูุฎ ุงูุฏูุฑู ุงูุณุนูุฏู ูุฃุดูุฑ ุฃูุฏูุชู',
        'ุชุญููู ูุฃุฏุงุก ุงููุฑู ูู ุงูุฏูุฑู ุงููุตุฑู ุงูููุชุงุฒ'
      
      ],
      '2': [
        'ูุตูุฉ ูุนู ุงูุนูุฏ ุงูุชูููุฏู',
        'ุทุฑููุฉ ุชุญุถูุฑ ุงููุจุณุฉ ุงูุณุนูุฏูุฉ',
         'ุทุฑููุฉ ุนูู ุงููุณุฎู ุงูููุณุทููู',
      'ูุตูุฉ ุงููุจุณุฉ ุงูุณุนูุฏูุฉ ุงูุชูููุฏูุฉ',
      'ุฃูุถู ุทุฑู ุชุญุถูุฑ ุงููุนุฌูุงุช',
        'ุฃุดูู ุงูุฃุทุจุงู ุงูุฑูุถุงููุฉ'
      ],
      '3': [
        'ุฃุฌูู ุงููุฏู ุงูุณูุงุญูุฉ ูู ุงูุฎููุฌ',
        'ุฏูููู ูุฒูุงุฑุฉ ุฏุจู ูู 5 ุฃูุงู',
              'ุฃุฌูู ุงูุดูุงุทุฆ ูู ุงูุฎููุฌ ุงูุนุฑุจู',
      'ุฃูุถู ููุงุฏู ุฏุจู ููุนุงุฆูุงุช',
      'ูุตุงุฆุญ ุงูุณูุฑ ุฅูู ุณูุทูุฉ ุนูุงู',
        'ุฃูุงูู ุณูุงุญูุฉ ูุฎููุฉ ูู ุณูุทูุฉ ุนูุงู'
      ]
    },
    en: {
      '1': [
        'Top Arab Sports Clubs',
        'History of the Saudi Football League',
        'Performance Analysis of Egyptian League Teams'
      ],
      '2': [
        'Traditional Eid Cookie Recipe',
        'How to Make Saudi Kabsa',
        'Most Delicious Ramadan Dishes'
      ],
      '3': [
        'Top Tourist Cities in the Gulf',
        '5-Day Dubai Travel Guide',
        'Hidden Travel Gems in Oman'
      ]
    }
  };

  const currentTopics = topics[language]?.[currentCategory];
  
  if (!currentTopics || currentTopics.length === 0) {
    console.warn(`โ๏ธ ูุง ุชูุฌุฏ ููุงุถูุน ููุชุตููู ${currentCategory} ุฃู ุงููุบุฉ ${language}`);
    return language === 'en' ? 'General article in English' : 'ููุงู ุนุงู ุจุงููุบุฉ ุงูุนุฑุจูุฉ';
  }

  // ุงุฎุชูุงุฑ ููุถูุน ุนุดูุงุฆู ูู ุงููุงุฆูุฉ
  const randomIndex = Math.floor(Math.random() * currentTopics.length);
  return currentTopics[randomIndex];
}


function extractKeywords(topic, currentCategory = '4', language = 'ar') {
  const arabicStopWords = ['ูุฐู', 'ุงูุฐู', 'ุงูุชู', 'ูู', 'ุนู', 'ุนูู', 'ูู', 'ู', 'ุฃู', 'ุฅูู', 'ูุน', 'ุจูุง', 'ูู', 'ููุง'];
  const englishStopWords = ['this', 'that', 'from', 'with', 'about', 'into', 'and', 'the', 'for', 'are', 'was'];

  const stopWords = language === 'en' ? englishStopWords : arabicStopWords;

  // ุชุฎุตูุต ูููุงุช ููุชุงุญูุฉ ููุชุฑุญุฉ ููู ุชุตููู
  const customKeywords = {
    '1': ['ุฑูุงุถุฉ', 'ูุฑุฉ ุงููุฏู', 'ุงูุฏูุฑู', 'ุฃูุฏุงู', 'ุชุญููู'], // ุฑูุงุถุฉ
    '2': ['ุทุจุฎ', 'ูุตูุฉ', 'ููุงุฏูุฑ', 'ุทุฑููุฉ', 'ููููุงุช'],        // ูุตูุงุช
    '3': ['ุณูุงุญุฉ', 'ุงูุณูุฑ', 'ุฏููู', 'ูุฌูุฉ', 'ููุงุฏู'],         // ุฃูุงูู ุณูุงุญูุฉ
    '4': [] // ููุถูุน ูุฎุตุต
  };

  const words = topic.toLowerCase().split(/\s+/);
  const baseKeywords = words.filter(word => word.length > 3 && !stopWords.includes(word));

  const combinedKeywords = [...new Set([
    ...customKeywords[currentCategory],
    ...baseKeywords
  ])];

  return combinedKeywords.slice(0, 7).join(', ');
}


function generatePrompt(topic, currentCategory, language = 'ar') {
  if (language === 'en') {
  return `Write a detailed, SEO-optimized blog post of at least 2000 words about "${topic}".
Include HTML formatting with <h2>, <p>, <ul>, and <li> as needed. Add a conclusion and a sources section in <h2>Sources</h2> with links inside <ul><li><a href='...'>Source</a></li></ul>.`;
}
const keywords = extractKeywords(topic, currentCategory, language);
 
   const prompts = {
    '1': `ุงูุชุจ ููุงููุง ุฑูุงุถููุง ุงุญุชุฑุงูููุง ูุง ููู ุนู 2000 ูููุฉ ุญูู "${topic}"  ููุธูุฉ ููุชูุงููุฉ ูุน ูุนุงููุฑ ุงูุณูู (SEO)ุ ูุชุถูู:
- ูุง ุชูุชุจ ุฃู ููุฑุฉ ุฎุงุฑุฌ ุนูุงุตุฑ HTML
- ููุฏูุฉ ุชุนุฑูููุฉ ุจุงูููุฑุฉ
- ุนูุงููู ุฑุฆูุณูุฉ ููุฑุนูุฉ (h2/h3)
- ูููุงุช ููุชุงุญูุฉ: ${keywords}
- ููุฑุงุช ููุธูุฉ ุฏุงุฎู <p>
- ุฎุงุชูุฉ ูุงุถุญุฉ ู ุชุดุฌูุน ุงููุงุฑุฆ ุนูู ุงูุชูุงุนู
- ูุฌุจ ุฃู ูุง ุชูู ุงูููุงูุฉ ุนู 2000 ูููุฉุ ูุง ุชุฎุชุตุฑ ููุง ุชููู ุงููุญุชูู
- ูุง ุชุถู ูุณููุง ูููุตุงุฏุฑุ ุณูุชู ุฅุฏุฑุงุฌู ุชููุงุฆููุง ูู ููุงูุฉ ุงูููุงู.`,

    '2': `ุงูุชุจ ูุตูุฉ ููุตูุฉ ูุง ุชูู ุนู 2000 ูููุฉ ุญูู "${topic}"  ูุชูุงููุฉ ูุน ุงูุณููุ ุชุดูู:
- ูุง ุชูุชุจ ุฃู ููุฑุฉ ุฎุงุฑุฌ ุนูุงุตุฑ HTML
- ููุฏูุฉ ุชุนุฑูููุฉ ุจุงูููุฑุฉ
- ุนูุงููู ุฑุฆูุณูุฉ ููุฑุนูุฉ (h2/h3)
- ูููุงุช ููุชุงุญูุฉ: ${keywords}
- ุฎุทูุงุช ุชุญุถูุฑ ูุฑููุฉ ุฏุงุฎู <ol><li>
- ูุนูููุงุช ุบุฐุงุฆูุฉ ู ุชุดุฌูุน ุงููุงุฑุฆ ุนูู ุงูุชูุงุนู
- ูุฌุจ ุฃู ูุง ุชูู ุงูููุงูุฉ ุนู 2000 ูููุฉุ ูุง ุชุฎุชุตุฑ ููุง ุชููู ุงููุญุชูู
- ูุง ุชุถู ูุณููุง ูููุตุงุฏุฑุ ุณูุชู ุฅุฏุฑุงุฌู ุชููุงุฆููุง ูู ููุงูุฉ ุงูููุงู.`,

    '3': `ุฃูุดุฆ ุฏููู ุณูุงุญู ููุตู ูุง ููู ุนู 2000 ูููุฉ ุญูู "${topic}"  ููุธูุฉุ ูุญุชูู ุนูู:
- ูุง ุชูุชุจ ุฃู ููุฑุฉ ุฎุงุฑุฌ ุนูุงุตุฑ HTML
- ููุฏูุฉ ุชุนุฑูููุฉ ุจุงูููุฑุฉ
- - ุนูุงููู ุฑุฆูุณูุฉ ููุฑุนูุฉ (h2/h3) ูููุฏู ูุงูุฃูุดุทุฉ
- ูููุงุช ููุชุงุญูุฉ: ${keywords}
- ููุฑุงุช ุฏุงุฎู <p> ูุงุจูุฉ ููุนุฑุถ ูู Blogger
- ุฎุงุชูุฉ ูููุฉ ูุชุดุฌูุน ุงููุงุฑุฆ ุนูู ุงูุชูุงุนู
- ูุฌุจ ุฃู ูุง ุชูู ุงูููุงูุฉ ุนู 2000 ูููุฉุ ูุง ุชุฎุชุตุฑ ููุง ุชููู ุงููุญุชูู
- ูุง ุชุถู ูุณููุง ูููุตุงุฏุฑุ ุณูุชู ุฅุฏุฑุงุฌู ุชููุงุฆููุง ูู ููุงูุฉ ุงูููุงู.`,

     '4': `ุงูุชุจ ููุงูุฉ ุนุงูุฉ ููุณูุฉ ูุง ุชูู ุนู 2000 ูููุฉ ุญูู "${topic}"ุ ูุน:
- ูุง ุชูุชุจ ุฃู ููุฑุฉ ุฎุงุฑุฌ ุนูุงุตุฑ HTML
- ููุฏูุฉ ุชุนุฑูููุฉ ุจุงูููุฑุฉ
- ุนูุงููู ุฑุฆูุณูุฉ ููุฑุนูุฉ (h2/h3)
- ูููุงุช ููุชุงุญูุฉ: ${keywords}
- ููุฑุงุช ูุงุถุญุฉ ุฏุงุฎู <p>
- ุฎุงุชูุฉ ูููุฉ ุชูุฎุต ุงูุฃููุงุฑ ูุชุดุฌุน ุงููุงุฑุฆ ุนูู ุงูุชูุงุนู
- ูุฌุจ ุฃู ูุง ุชูู ุงูููุงูุฉ ุนู 2000 ูููุฉุ ูุง ุชุฎุชุตุฑ ููุง ุชููู ุงููุญุชูู
- ูุง ุชุถู ูุณููุง ูููุตุงุฏุฑุ ุณูุชู ุฅุฏุฑุงุฌู ุชููุงุฆููุง ูู ููุงูุฉ ุงูููุงู.`
};

  if (!currentCategory || !prompts[currentCategory]) {
    return `ุงูุชุจ ููุงูุฉ  ููุธูุฉ ูุง ุชูู ุนู 2000 ูููุฉ ุนู "${topic}"ุ ูุชูุงููุฉ ูุน ุงูุณููุ ุชุชุถูู ุนูุงููู ูููุฑุงุช ูุตูุฑ ุจุตูุบุฉ webp.`;
  }

  return prompts[currentCategory];
}


    </script>
 <div id="articlesOutput" style="display: flex; flex-direction: column;"></div>
<script src="script.js" defer></script>

<div style="margin-top: 40px; text-align: center; font-family: 'Tajawal', sans-serif; font-size: 15px;">
  <a href="/privacy.html" target="_blank" style="
    margin: 0 10px;
    color: #007bff;
    text-decoration: none;
    border-bottom: 2px solid transparent;
    transition: all 0.3s ease;
  " onmouseover="this.style.borderBottom='2px solid #007bff'" onmouseout="this.style.borderBottom='2px solid transparent'">
    ุณูุงุณุฉ ุงูุฎุตูุตูุฉ
  </a>

  <span style="color: #999;">|</span>

  <a href="/terms.html" target="_blank" style="
    margin: 0 10px;
    color: #007bff;
    text-decoration: none;
    border-bottom: 2px solid transparent;
    transition: all 0.3s ease;
  " onmouseover="this.style.borderBottom='2px solid #007bff'" onmouseout="this.style.borderBottom='2px solid transparent'">
    ุดุฑูุท ุงูุงุณุชุฎุฏุงู
  </a>
</div>
<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-4566381369537635"
     crossorigin="anonymous"></script>
<script type='text/javascript' src='//pl27266863.profitableratecpm.com/d5/00/5a/d5005a9599d9766883669084ba31dcbe.js'></script>

</body>
</html>